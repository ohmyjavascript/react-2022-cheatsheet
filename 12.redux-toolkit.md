# Redux toolkit.

- Makes working with redux easier.
- This library allows mutating the objects.
- Can uninstall redux now.

```
npm install @reduxjs/toolkit react-redux
npm install reselect
```

In store/store.js

// instead of combineReducers, we have configureStore function from RTK.

```
import { configureStore } from "@reduxjs/toolkit";
import counterReducer from "./counterSlice";

export default configureStore({
  reducer: {
    count: counterReducer,
  },
});

```

In store/index.js

```
import store from "store/store";

const app = (
  <Provider store={store}>
    <App />
  </Provider>
);
ReactDOM.render(app, document.getElementById("root"));
```

In store/counterSlice.js

```
import { createSlice } from "@reduxjs/toolkit";
import { createSelector } from "reselect";

export const counterSlice = createSlice({
  name: "counter",
  initialState: {
    counter: 0,
  },
  reducers: {  // we add methods inside reducers ( name is important )
    increment: (state, action) => {
      state.counter = state.counter + action.payload.amount; // we can mutate directly now.
    },
    increment(state, action){
      state.counter = state.counter + action.payload.amount; // we can mutate directly now.
    },
    decrement: (state) => {
      state.counter = state.counter - 1;
    },
    decrement(state){
      state.counter = state.counter - 1;
    },
  },
});

export const { increment, decrement } = counterSlice.actions;

// or

export const counterActions = counterSlice.actions;
and call counterActions.increment, counterActions.decrement etc.
If we need to pass extra arguments, we can pass them and can be accessed via a reserved
keyword called "payload" that holds any extra payload that we send to the action.


// Selectors
const counterRootSlice = (state) => state.count;

// From root slice, get the counter slice
export const getCounter = createSelector(
  counterRootSlice,
  (count) => count.counter
);

export default counterSlice.reducer;
```

In Component , Counter.js

```
import React from "react";
import { useSelector, useDispatch } from "react-redux";
import { increment, decrement, getCounter } from "../store/counterSlice";

const Counter = (props) => {
  const dispatch = useDispatch();
  const count = useSelector(getCounter);

  return (
    <div>
      <h1> Count is {count} </h1>
      // We need to execute the action creators to get the action object
      <button onClick={() => dispatch(increment())}> Add </button>
      <button onClick={() => dispatch(decrement())}> Subtract </button>
    </div>
  );
};

export default Counter;
```

We can add more createSlice() to hold separate slices of state.
We can have store/counter.js, store/auth.js etc and import them everything into
store/index.js where we merge those slices.
